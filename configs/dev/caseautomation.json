{
	"applicationName":"caseautomation",
	"emailinfo":{
		"emailto":["pradeep.kumar@cognosante.com","mark.babcock@cognosante.com"],
		"emailfrom":"caseautomationsupport@cognosante.com",
		"contactno":"123-456-7890"
	},
	"events":[
		{
			"eventTrigger":"StartCaseAutomation",
			"eventDescription":"Create a cluster",
			"eventFunction":"Execute-Runbook",
			"eventParams":[
				{"key":"runbookName","value":"Create-CaseAutomationCluster"},
				{"key":"resourceGroupName","value":"$env:spnresourcegroupname"},
				{"key":"automationAccount","value":"$env:automationaccountname"},
 				{"key":"location","value":"$env:location"},
 				{"key":"subscriptionId","value":"$env:subscriptionid"},
 				{"key":"storageAccountName","value":"$env:storageAccountName"},
 				{"key":"containerName","value":"$env:clustercontainer"},
 				{"key":"clusterName","value":"$env:clustername"},
				{"key":"outMessage","value":"ClusterCreated"},
				{"key":"pswrd","value":"$env:clusterpassword"},
				{"key":"ScriptActionURI","value":"https://$env:storageAccountName.blob.$endpoint/$env:clustercontainer/ca-scriptaction"},
				{"key":"queueName","value":"$env:listenerqueueName"},
				{"key":"VirtualNetworkId","value":"/subscriptions/$env:subscriptionid/resourceGroups/$env:spnresourcegroupname/providers/Microsoft.Network/virtualNetworks/$env:clusterVirtualNet"},
				{"key":"SubnetName","value":"/subscriptions/$env:subscriptionid/resourceGroups/$env:spnresourcegroupname/providers/Microsoft.Network/virtualNetworks/$env:clusterVirtualNet/subnets/$env:clusterSubNet"},
				{"key":"endpoint","value":"$env:endpoint"}
			]
		},
		{
			"eventTrigger":"ClusterCreated",
			"eventDescription":"Create messages for parallel jobs",
			"eventFunction":"Initiate-Parallel-Requests",
			"eventParams":[
				{"key":"queuename","value":"$env:listenerqueueName"},
				{"key":"connectionstring","value":"$env:AzureWebJobsStorage"},
				{"key":"storagekey","value":"$env:storageaccountkey"},
				{"key":"storageaccountname","value":"$env:storageAccountName"},
				{"key":"message","value":"StartFFMParquetConversion"},
				{"key":"message","value":"StartRCNOParquetConversion"},
				{"key":"message","value":"Start1095AParquetConversion"},
				{"key":"message","value":"StartCaseClassification"}
			]
		},
		{
			"eventTrigger":"StartCaseClassification",
			"eventDescription":"Case Classification",
			"eventFunction":"Initiate-Livy",
			"eventParams":[Â  
				{"key":"clusteruser","value":"$env:clusteruser"},
				{"key":"SecurePassword","value":"$env:clusterpassword"},
				{"key":"clustername","value":"$env:clustername"},
				{"key":"mainfile","value":"ca-python/src/CaseClassification.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"$env:storageAccountName"},
				{"key":"pyargs","value":"$env:storageaccountkey"},
				{"key":"pyargs","value":"$env:endpoint"},
				{"key":"pyargs","value":"$env:clustercontainer"},
				{"key":"pyargs","value":"$env:listenerqueueName"},
				{"key":"pyargs","value":"ca-python/pickle/"},
				{"key":"pyargs","value":"hics_model.sav2"},
				{"key":"pyargs","value":"ca-inputs/hics/"},
				{"key":"pyargs","value":"ca-outputs/classification/"},
				{"key":"pyargs","value":"ClassifiedCases.csv"},
				{"key":"pyfiles","value":"ca-python/src/cafunctions.py"},	
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"STStartCaseClassification",
			"eventDescription":"Case Classification",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"ca-python/src/CaseClassification.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"$env:storageAccountName"},
				{"key":"pyargs","value":"$env:storageaccountkey"},
				{"key":"pyargs","value":"$env:endpoint"},
				{"key":"pyargs","value":"$env:clustercontainer"},
				{"key":"pyargs","value":"$env:listenerqueueName"},
				{"key":"pyargs","value":"ca-python/pickle/"},
				{"key":"pyargs","value":"hics_model.sav2"},
				{"key":"pyargs","value":"ca-inputs/hics/"},
				{"key":"pyargs","value":"ca-outputs/classification/"},
				{"key":"pyargs","value":"ClassifiedCases.csv"},
				{"key":"pyfiles","value":"ca-python/src/cafunctions.py"},	
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"StartFFMParquetConversion",
			"eventDescription":"Convert FFM File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"ca-python/src/FFMConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"$env:storageAccountName"},
				{"key":"pyargs","value":"$env:storageaccountkey"},
				{"key":"pyargs","value":"$env:endpoint"},
				{"key":"pyargs","value":"$env:listenerqueueName"},
				{"key":"pyargs","value":"$env:clustercontainer"},
				{"key":"pyargs","value":"ca-inputs/ffm/"},
				{"key":"pyargs","value":"ca-parquet/ffm/"},
				{"key":"pyfiles","value":"ca-python/src/cafunctions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"Start1095AParquetConversion",
			"eventDescription":"Convert 1095A File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"ca-python/src/1095AConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"$env:storageAccountName"},
				{"key":"pyargs","value":"$env:storageaccountkey"},
				{"key":"pyargs","value":"$env:endpoint"},
				{"key":"pyargs","value":"$env:listenerqueueName"},
				{"key":"pyargs","value":"$env:clustercontainer"},
				{"key":"pyargs","value":"ca-inputs/1095a/"},
				{"key":"pyargs","value":"ca-parquet/1095a/"},
				{"key":"pyfiles","value":"ca-python/src/cafunctions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"StartRCNOParquetConversion",
			"eventDescription":"Convert RCNO File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"ca-python/src/RCNOConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"$env:storageAccountName"},
				{"key":"pyargs","value":"$env:storageaccountkey"},
				{"key":"pyargs","value":"$env:endpoint"},
				{"key":"pyargs","value":"$env:listenerqueueName"},
				{"key":"pyargs","value":"$env:clustercontainer"},
				{"key":"pyargs","value":"ca-inputs/rcno/"},
				{"key":"pyargs","value":"ca-parquet/rcno/"},
				{"key":"pyfiles","value":"ca-python/src/cafunctions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		}
	]
}

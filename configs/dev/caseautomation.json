{
	"applicationName":"caseautomation",
	"emailinfo":{
		"emailto":["pradeep.kumar@cognosante.com"],
		"emailfrom":"caseautomationsupport@cognosante.com"
	},
	"events":[
		{
			"eventTrigger":"StartCaseAutomation",
			"eventDescription":"Create a cluster",
			"eventFunction":"Execute-Runbook",
			"eventParams":[
				{"key":"runbookName","value":"Test-Create-HDISparkCluster"},
				{"key":"resourceGroupName","value":"CERRS-DEV-TEST-RG"},
				{"key":"automationAccount","value":"env-automationaccountname"},
 				{"key":"location","value":"env-location"},
 				{"key":"subscriptionId","value":"env-subscriptionid"},
 				{"key":"storageAccountName","value":"env-storageAccountName"},
 				{"key":"containerName","value":"env-clustercontainer"},
 				{"key":"clusterName","value":"env-clustername"},
				{"key":"outMessage","value":"ClusterCreated"},
				{"key":"pswrd","value":"env-clusterpassword"},
				{"key":"queueName","value":"env-listenerqueueName"}
			]
		},
		{
			"eventTrigger":"ClusterCreated",
			"eventDescription":"Create messages for parallel jobs",
			"eventFunction":"Initiate-Parallel-Requests",
			"eventParams":[
				{"key":"queuename","value":"env-listenerqueueName"},
				{"key":"connectionstring","value":"env-AzureWebJobsStorage"},
				{"key":"storagekey","value":"env-storageaccountkey"},
				{"key":"storageaccountname","value":"env-storageAccountName"},
				{"key":"message","value":"StartFFMParquetConversion"},
				{"key":"message","value":"StartRCNOParquetConversion"},
				{"key":"message","value":"Start1095AParquetConversion"},
				{"key":"message","value":"StartCaseClassification"}
			]
		},
		{
			"eventTrigger":"StartCaseClassification",
			"eventDescription":"Case Classification",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"CaseClassification.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"env-storageAccountName"},
				{"key":"pyargs","value":"env-storageaccountkey"},
				{"key":"pyargs","value":"env-endpoint"},
				{"key":"pyargs","value":"env-clustercontainer"},
				{"key":"pyargs","value":"env-listenerqueueName"},
				{"key":"pyargs","value":"hics_model.sav2"},
				{"key":"pyargs","value":"hicsArchive/"},
				{"key":"pyargs","value":"ClassificationOutput/"},
				{"key":"pyargs","value":"StartAndEndDateOutPut.csv"},
				{"key":"pyfiles","value":"functions.py"},	
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"StartFFMParquetConversion",
			"eventDescription":"Convert FFM File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"jobs/FFM_ConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"env-storageAccountName"},
				{"key":"pyargs","value":"env-storageaccountkey"},
				{"key":"pyargs","value":"env-endpoint"},
				{"key":"pyargs","value":"env-listenerqueueName"},
				{"key":"pyargs","value":"env-clustercontainer"},
				{"key":"pyfiles","value":"jobs/functions/functions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"Start1095AParquetConversion",
			"eventDescription":"Convert 1095A File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"jobs/1095A_ConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"env-storageAccountName"},
				{"key":"pyargs","value":"env-storageaccountkey"},
				{"key":"pyargs","value":"env-endpoint"},
				{"key":"pyargs","value":"env-listenerqueueName"},
				{"key":"pyargs","value":"env-clustercontainer"},
				{"key":"pyfiles","value":"jobs/functions/functions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"StartRCNOParquetConversion",
			"eventDescription":"Convert RCNO File to Parquet",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"jobs/RCNO_ConvertToParquet.py"},
				{"key":"outMessage","value":"ConversionCompleted"},
				{"key":"pyargs","value":"env-storageAccountName"},
				{"key":"pyargs","value":"env-storageaccountkey"},
				{"key":"pyargs","value":"env-endpoint"},
				{"key":"pyargs","value":"env-listenerqueueName"},
				{"key":"pyargs","value":"env-clustercontainer"},
				{"key":"pyfiles","value":"jobs/functions/functions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"ConversionCompleted",
			"eventDescription":"Waits for jobs that run conncurrently to trigger the next job",
			"eventFunction":"Wait-For-Concurrent-Jobs",
			"eventParams":[
				{"key":"blobname","value":"jobwait/waitfordataextraction"},
				{"key":"currentmessage","value":"StartDataExtraction"},
				{"key":"outmessage","value":"StartDataExtraction"},
				{"key":"waitmessage","value":"FFMParquetConversionComplete"},
				{"key":"waitmessage","value":"RCNOParquetConversionComplete"},
				{"key":"waitmessage","value":"1095AParquetConversionComplete"},
				{"key":"waitmessage","value":"CaseClassificationComplete"}
			]
		},
		{
			"eventTrigger":"StartDataExtraction",
			"eventDescription":"Data Extraction from FFM, 1095A and RCNO",
			"eventFunction":"Initiate-Livy",
			"eventParams":[
				{"key":"mainfile","value":"SparkTemp.py"},
				{"key":"outMessage","value":"DataExtractionCompleted"},
				{"key":"pyargs","value":"env-storageAccountName"},
				{"key":"pyargs","value":"env-storageaccountkey"},
				{"key":"pyargs","value":"env-endpoint"},
				{"key":"pyargs","value":"env-listenerqueueName"},
				{"key":"pyargs","value":"env-clustercontainer"},
				{"key":"pyargs","value":"caseoutput/"},
				{"key":"pyargs","value":"wasbs://cerrscablob@cerrscaseautomationdev.blob.core.usgovcloudapi.net//ClassificationOutput//StartAndEndDateOutPut.csv"},
				{"key":"pyargs","value":"wasbs://rcno-parquet@cerrscaseautomation.blob.core.usgovcloudapi.net//part*"},
				{"key":"pyargs","value":"wasbs://ffm-parquet@cerrscaseautomation.blob.core.usgovcloudapi.net//part*"},
				{"key":"pyargs","value":"wasbs://1095a-parquet@cerrscaseautomation.blob.core.usgovcloudapi.net//part*"},
				{"key":"pyargs","value":"Caseoutput.csv"},
				{"key":"pyfiles","value":"jobs/functions/functions.py"},
				{"key":"pyconf-spark.yarn.appMasterEnv.PYSPARK_PYTHON","value":"python2"}
			]
		},
		{
			"eventTrigger":"ExecuteRestAPI",
			"eventDescription":"Execute a Rest API",
			"eventFunction":"Execute-RestRequest",
			"eventParams":[
				{"key":"resturl","value":"https://mcr-cc.test.cognosante.cc/v1/AddressInfo"},
				{"key":"restMethod","value":"Get"},
				{"key":"restparams-street","value":"+509+Adams+Ave+Apt+1A+Cape+Canaveral+FL+32920"},
				{"key":"header-callingApp","value":"TestFramework"},
				{"key":"header-callingUser","value":"AutomationUser"},
				{"key":"header-x-cognosante-authentication","value":"6d5d56f7cf494134a96cc6910549341a"},
				{"key":"header-Authorization","value":"Basic eF9jb2dub3NhbnRlX2F1dGhlbnRpY2F0aW9uOjZkNWQ1NmY3Y2Y0OTQxMzRhOTZjYzY5MTA1NDkzNDFh"}
			]
		}
	]
}
